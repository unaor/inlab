<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<hgroup th:insert="fragments/cliente/headCliente.html :: headCliente">
</hgroup>

<body class="sidebar-mini">

	<div class="wrapper">
		<!--NAV-->
		<!-- SIDEBAR    -->
		<aside th:insert="fragments/cliente/asideCliente.html :: asideCliente">
		</aside>
		<!-- /SIDEBAR    -->
		<!-- TOPBAR    -->
		<!--/NAV-->
		<!--MAIN-->
		<div class="main-panel">
			<!-- HEADER -->
			<nav th:insert="fragments/nav.html :: nav"></nav>
			<!-- /HEADER -->

			<!-- /TOPBAR    -->
			<!-- CONTENT    -->





			<!--CONTAINER-->
			<div class="panel-header panel-header-sm"></div>
			<div class="content">
				<div class="row">
					<div class="col-lg-4">
						<div class="card card-chart">
							<div class="card-header">
								<h5 class="card-title">
									<a class="" th:href="@{/video(cp=${campaign.campaignId})}"><i class="now-ui-icons tech_tv"></i>
										VIDEO <i class="now-ui-icons arrows-1_minimal-right small ico"></i></a>
								</h5>
								<!--<div class="dropdown">
				                    <button type="button" class="btn btn-round btn-default dropdown-toggle btn-simple btn-icon no-caret" data-toggle="dropdown">
				                        <i class="now-ui-icons arrows-1_minimal-down"></i>
				                    </button>
				                    <div class="dropdown-menu dropdown-menu-right">
				                        <a class="dropdown-item" href="#">Opción 1</a>
				                        <a class="dropdown-item" href="#">Opción 2</a>
				                    </div>
				                </div>-->
							</div>
							<div class="card-body">
								<div class="chart-area">
									<div id="Container"
										style="padding-bottom: 65%; position: relative; display: block; width: 100%">
 									<iframe id="frameVideo" name="frameVideo" width="100%" height="100%"
				                                th:src="${campaign.videoUrl}"
				                                frameborder="0"
				                                style="position:absolute; top:0; left: 0"></iframe>
									</div>
								</div>
							</div>
							<div class="card-footer">
								<hr>
								<div class="stats">
									<i class="now-ui-icons tech_tv"></i> en vivo
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-4 col-md-6">
						<div class="card card-chart">
							<div class="card-header">
								<h5 class="card-title">
									<a class="" th:href="@{/mediciones(cp=${campaign.campaignId})}"><i
										class="now-ui-icons files_paper"></i> MEDICIONES <i
										class="now-ui-icons arrows-1_minimal-right small ico"></i></a>
								</h5>
							</div>
							<div class="card-body">
								<div class="chart-area p-t-10">
									<!-- <img id="frameimgMediciones" name="frameimgMediciones" src="" /> -->
									<img th:src="${campaign.pollImageUrl}">
								</div>
							</div>
							<div class="card-footer">
								<hr>
								<div class="stats">
									<i class="now-ui-icons files_paper"></i> Online
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-4 col-md-6">
						<div class="card card-chart">
							<div class="card-header">
								<h5 class="card-title">
									<a class="" th:href="@{/insight(cp=${campaign.campaignId})}"><i
										class="now-ui-icons business_bulb-63"></i> INSIGHT <i
										class="now-ui-icons arrows-1_minimal-right small ico"></i></a>
								</h5>
							</div>
							<div class="card-body">
								<div class="chart-area">
									<div class="row">
										<div class="col-sm-12 col-centered text-center">
										<input type="hidden" id="insightD" th:value="${campaign.insightId}">
											<div id="cloudContainer"></div>
										</div>
									</div>
								</div>
							</div>
							<div class="card-footer">
								<hr>
								<div class="stats">
									<i class="now-ui-icons business_bulb-63"></i> Online
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-4">
						<div class="card card-chart">
							<div class="card-header">
								<h5 class="card-title">
									<a class="" th:href="@{/video(cp=${campaign.campaignId})}"><i
										class="now-ui-icons ui-2_chat-round"></i> CHAT <i
										class="now-ui-icons arrows-1_minimal-right small ico"></i></a>
								</h5>
							</div>
							<div class="card-body">
								<div class="chart-area">
									<div id="Container"
										style="padding-bottom: 65%; position: relative; display: block; width: 100%">
										<iframe id="frameChat" name="frameChat" width="100%"
											height="100%" th:src="${campaign.chatUrl}" frameborder="0"
											style="position: absolute; top: 0; left: 0"></iframe>
									</div>
								</div>
							</div>
							<div class="card-footer">
								<hr>
								<div class="stats">
									<i class="now-ui-icons ui-2_chat-round"></i> en vivo
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-4">
						<div class="card card-chart">
							<div class="card-header">
								<h5 class="card-title">
									<a class="" th:href="@{/social(cp=${campaign.campaignId})}"><i
										class="now-ui-icons ui-2_like"></i> REDES SOCIALES <i
										class="now-ui-icons arrows-1_minimal-right small ico"></i></a>
								</h5>
							</div>
							<div class="card-body">
								<div class="chart-area">
									<div id="Container"
										style="padding-bottom: 65%; position: relative; display: block; width: 100%">

										<iframe id="frameRedes_timeline" name="frameRedes_timeline"
											width="100%" height="100%" th:src="${campaign.timelineUrl}" frameborder="0"
											style="position: absolute; top: 0; left: 0"></iframe>
									</div>
								</div>
							</div>
							<div class="card-footer">
								<hr>
								<div class="stats">
									<i class="now-ui-icons ui-2_like"></i> Online
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-4">
						<div class="card card-chart">
							<div class="card-header">
								<h5 class="card-title">
									<a class="" th:href="@{/bi(cp=${campaign.campaignId})}"><i
										class="now-ui-icons business_chart-bar-32"></i> VISUAL CR <i
										class="now-ui-icons arrows-1_minimal-right small ico"></i></a>
								</h5>
							</div>
							<div class="card-body">
								<div class="chart-area">

									<div id="Container"
										style="padding-bottom: 65%; position: relative; display: block; width: 100%">
										<iframe id="frameVisualCR" name="frameVisualCR" width="100%"
											height="100%" th:src="${campaign.powerBIUrl}" frameborder="0"
											style="position: absolute; top: 0; left: 0"></iframe>
									</div>
								</div>
							</div>
							<div class="card-footer">
								<hr>
								<div class="stats">
									<i class="now-ui-icons business_chart-bar-32"></i>
									<script>
										var f = new Date();
										document.write(f.getDate() + "/"
												+ (f.getMonth() + 1) + "/"
												+ f.getFullYear());
									</script>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-4 col-md-6">
						<div class="card card-chart">
							<div class="card-header">
								<h5 class="card-title">
									<a class="" th:href="@{/galeria(cp=${campaign.campaignId})}"><i
										class="now-ui-icons media-1_camera-compact"></i> GALERÍA <i
										class="now-ui-icons arrows-1_minimal-right small ico"></i></a>
								</h5>
								<!--<h4 class="card-title">All products</h4>-->
							</div>
							<div class="card-body">
								<div class="chart-area">
									<div id="picsCarousel" class="carousel slide" data-ride="carousel">
										<div id="picsContainer" class="carousel-inner">
											<!-- contenido carousel -->
										</div>
										<a class="carousel-control-prev"
											href="#picsCarousel" role="button"
											data-slide="prev"> <span
											class="carousel-control-prev-icon" aria-hidden="true"></span>
											<span class="sr-only">Previous</span>
										</a> <a class="carousel-control-next"
											href="#picsCarousel" role="button"
											data-slide="next"> <span
											class="carousel-control-next-icon" aria-hidden="true"></span>
											<span class="sr-only">Next</span>
										</a>
									</div>
								</div>
							</div>
							<div class="card-footer">
								<hr>
								<div class="stats">
									<i class="now-ui-icons media-1_camera-compact"></i>
									<script>
										var f = new Date();
										document.write(f.getDate() + "/"
												+ (f.getMonth() + 1) + "/"
												+ f.getFullYear());
									</script>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-4 col-md-6">
						<div class="card card-chart">
							<div class="card-header">
								<h5 class="card-title">
									<a class="" th:href="@{/emociones(cp=${campaign.campaignId})}"><i
										class="now-ui-icons emoticons_satisfied"></i> EMOCIONES</a>
								</h5>
								<!--<h4 class="card-title">All products</h4>-->
							</div>
							<div class="card-body">
								<div class="chart-area">
									<div id="Container"
										style="padding-bottom: 65%; position: relative; display: block; width: 100%">
										<iframe id="frameImgEmociones" name="frameImgEmociones"
											width="100%" height="100%" th:src="${campaign.emotionsUrl}" frameborder="0"
											style="position: absolute; top: 0; left: 0"> </iframe>
									</div>
								</div>
							</div>
							<div class="card-footer">
								<hr>
								<div class="stats">
									<i class="now-ui-icons emoticons_satisfied"></i>
									<script>
										var f = new Date();
										document.write(f.getDate() + "/"
												+ (f.getMonth() + 1) + "/"
												+ f.getFullYear());
									</script>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--/CONTAINER-->
			<!-- /CONTENT   -->


			<!--FOOTER-->
			<footer th:insert="fragments/footer.html :: footer"> </footer>
			<!--/FOOTER-->


		</div>
		<!--/MAIN-->
	</div>
	<!-- /BODY -->


	<var th:insert="fragments/scripts.html :: var"> </var>

<script src="/Plugins/jQCloud-master/jqcloud-1.0.4.js"></script>
<!-- <script src="/Plugins/jquery-tagcloud-master/jquery.tagcloud.js"></script> -->

<script th:inline="javascript">
/*<![CDATA[*/
	
	var pics = /*[[${campaign.galleries}]]*/ 'default';
	//console.log(pics);
	
	var picHTML = "";
	pics.map((pic, index) => {
		
		var picElement = pic.image;
		
		if (index === 0){
			
			picHTML += '<div class="carousel-item active"><img class="d-block w-100" src="'+ picElement +'"></div>';
		}else{
			picHTML += '<div class="carousel-item"><img class="d-block w-100" src="'+ picElement +'"></div>';				
		}
	});
	
	$('#picsContainer').append(picHTML);

    var answers = /*[[${answers}]]*/ 'default';
    answers.map((answer, index) => {
    	console.log(answer);
    	if (index === 0){
    	$("#cloudContainer").append('<p class="font-weight-bold">' + answer.questionName + '</p><div class="col-centered justify-content-center" style="margin-top:-10px;" id="question-' + index + '"></div>')
       	 /* $("#question-" + index).append("<h2>" + answer.questionName + "</h2>"); */
       	 answer.tags.map(tag => tag.html = {'data-tooltip': tag.text + ' - ' + tag.weight});
    	//$("#question-" + index).jQCloud(answer.tags, {width:250, height:250});
   		
    	var text_string = answers[index].tags[index].wholeWords;

    	drawWordCloud(text_string);

    	function drawWordCloud(text_string){
    	  var common = answers[0].tags[0].badWords;
    	
    	  var word_count = {};
    	
    	  var words = text_string.split(/[ '\-\(\)\*":;\[\]|{},.!?]+/);
    	    if (words.length == 1){
    	      word_count[words[0]] = 1;
    	    } else {
    	      words.forEach(function(word){
    	        var word = word.toLowerCase();
    	        if (word != "" && common.indexOf(word)==-1 && word.length>1){
    	          if (word_count[word]){
    	            word_count[word]++;
    	          } else {
    	            word_count[word] = 1;
    	          }
    	        }
    	      })
    	    }
    	
    	  var svg_location = "#question-" + index;
    	  var width = 350;
    	  var height = 200;
    	
    	  var fill = d3.scale.category20();
    	
    	  var word_entries = d3.entries(word_count);
    	
    	  var xScale = d3.scale.linear()
    	     .domain([0, d3.max(word_entries, function(d) {
    	        return d.value;
    	      })
    	     ])
    	     .range([10,100]);
    	
    	  d3.layout.cloud().size([width, height])
    	    .timeInterval(20)
    	    .words(word_entries)
    	    .fontSize(function(d) { return xScale(+d.value); })
    	    .text(function(d) { return d.key; })
    	    .rotate(function() { return ~~(Math.random() * 2) * 90; })
    	    .font("Impact")
    	    .on("end", draw)
    	    .start();
    	
    	  function draw(words) {
    	    d3.select(svg_location).append("svg")
    	        .attr("width", width)
    	        .attr("height", height)
    	      .append("g")
    	        .attr("transform", "translate(" + [width >> 1, height >> 1] + ")")
    	      .selectAll("text")
    	        .data(words)
    	        
    	      .enter().append("text")
    	        .style("font-size", function(d) { return xScale(d.value) + "px"; })
    	        .style("font-family", "Impact")
    	        .style("fill", function(d, i) { return fill(i); })
    	        .attr("text-anchor", "middle")
    	        .attr("data-toggle", "tooltip")
    	        .attr("data-placement", "top")
    	        .attr("title", function(d) { return d.key + " - " + d.value; })
    	        .attr("transform", function(d) {
    	          return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
    	        })
    	        .text(function(d) { return d.key; });
    	  }
    	
    	  //d3.layout.cloud().stop();
    	}
    	
    	
    	
    	};
    	
    	
    });
/*]]>*/
</script>
<script>
$(document).ready(function(){
	$('[data-toggle="tooltip"]').tooltip();
});
</script>

</body>
</html>